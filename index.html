<!DOCTYPE html>
<html lang="en">
<head>
  <base href="/">
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="catsy">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png"/>

  <title>catsy</title>
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <!-- Flutter App Bootstrap -->
  <script src="flutter_bootstrap.js" async></script>

  <!-- Telegram Login Button -->
  <script async src="https://telegram.org/js/telegram-widget.js?15"
      data-telegram-login="Catssybot"  <!-- Replace with your bot username -->
      data-size="large"
      data-radius="10"
      data-auth-url="javascript:void(0)"  <!-- Prevent default Telegram auth URL -->
      data-request-access="write"
      onAuth="onTelegramAuth(user)">
  </script>

  <!-- JavaScript to Handle Telegram Authentication -->
  <script>
    function onTelegramAuth(user) {
      // Prepare user data to send to the Flask backend
      const data = {
        username: user.username,
        id: user.id,
        first_name: user.first_name,
        last_name: user.last_name
      };

      // Send the data to the Flask backend
      fetch('http://38.180.165.251:5000/auth', {  // Replace with your server URL
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.text())
      .then(result => console.log(result))
      .catch(error => console.error('Error:', error));
    }
  </script>
</body>
</html>
